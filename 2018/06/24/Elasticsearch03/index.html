<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Elasticsearch," />










<meta name="keywords" content="Elasticsearch">
<meta property="og:type" content="article">
<meta property="og:title" content="Elasticsearchå…¥é—¨ (3)">
<meta property="og:url" content="https://bengbu-yuezhang.github.io/yue.github.io/2018/06/24/Elasticsearch03/index.html">
<meta property="og:site_name" content="æ–°ä¸–ç´€ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://unsplash.it/1280/760?random">
<meta property="og:updated_time" content="2018-06-24T01:50:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Elasticsearchå…¥é—¨ (3)">
<meta name="twitter:image" content="https://unsplash.it/1280/760?random">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://bengbu-yuezhang.github.io/yue.github.io/2018/06/24/Elasticsearch03/"/>





  <title>Elasticsearchå…¥é—¨ (3) | æ–°ä¸–ç´€ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">æ–°ä¸–ç´€ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">å‰ç«¯å°å­¦ç”Ÿ</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://bengbu-yuezhang.github.io/yue.github.io/2018/06/24/Elasticsearch03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="å¼ è¶Š">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ–°ä¸–ç´€ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Elasticsearchå…¥é—¨ (3)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-24T06:00:00+08:00">
                2018-06-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="https://unsplash.it/1280/760?random" alt="image"></p>
<a id="more"></a>
<h1 id="èšåˆ"><a href="#èšåˆ" class="headerlink" title="èšåˆ"></a>èšåˆ</h1><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="æ¡¶"><a href="#æ¡¶" class="headerlink" title="æ¡¶"></a>æ¡¶</h3><p>æ¡¶æŒ‡çš„æ˜¯æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„æ–‡æ¡£çš„é›†åˆ, (æ¯”å¦‚æèˆªå±äºé™•è¥¿æ¡¶), èšåˆå¼€å§‹æ‰§è¡Œ, ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ä¼šæ”¾å…¥å¯¹åº”çš„æ¡¶ã€‚</p>
<h3 id="æŒ‡æ ‡"><a href="#æŒ‡æ ‡" class="headerlink" title="æŒ‡æ ‡"></a>æŒ‡æ ‡</h3><p>å¯¹æ¡¶å†…çš„æ–‡æ¡£è¿›è¡Œç»Ÿè®¡è®¡ç®—, ä¾‹å¦‚ï¼šæœ€å°å€¼, å¹³å‡å€¼, æ±‡æ€»ç­‰</p>
<h3 id="æŒ‡æ ‡ä¸æ¡¶"><a href="#æŒ‡æ ‡ä¸æ¡¶" class="headerlink" title="æŒ‡æ ‡ä¸æ¡¶"></a>æŒ‡æ ‡ä¸æ¡¶</h3><p>æ¡¶æ˜¯å¯ä»¥è¢«åµŒå¥—çš„, å¯ä»¥å®ç°éå¸¸å¤æ‚çš„ç»„åˆã€‚</p>
<p>å›½å®¶æ¡¶ -&gt; æ€§åˆ«æ¡¶ -&gt; å¹´é¾„æ®µæ¡¶ -&gt; ä¸åŒå›½å®¶ä¸åŒæ€§åˆ«ä¸åŒå¹´é¾„æ®µçš„å¹³å‡å·¥èµ„</p>
<h2 id="åˆæ­¥èšåˆ"><a href="#åˆæ­¥èšåˆ" class="headerlink" title="åˆæ­¥èšåˆ"></a>åˆæ­¥èšåˆ</h2><h3 id="ç®€å•çš„èšåˆ"><a href="#ç®€å•çš„èšåˆ" class="headerlink" title="ç®€å•çš„èšåˆ"></a>ç®€å•çš„èšåˆ</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å¯¹æ¯ä¸€ä¸ªçœä»½çš„æ•°æ®è¿›è¡Œèšåˆ</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>, </span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"province_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.province.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">10</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç®€å•çš„æŒ‡æ ‡"><a href="#ç®€å•çš„æŒ‡æ ‡" class="headerlink" title="ç®€å•çš„æŒ‡æ ‡"></a>ç®€å•çš„æŒ‡æ ‡</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// èšåˆæ¯ä¸€ä¸ªçœä»½çš„æ–‡æ¡£, å¹¶å¯¹æ¯ä¸€ä¸ªçœä»½çš„å¾—åˆ†æ±‚å¹³å‡å€¼</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"province_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.province.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">100</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"avg_score"</span>: &#123;</span><br><span class="line">          <span class="string">"avg"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"score"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åµŒå¥—æ¡¶"><a href="#åµŒå¥—æ¡¶" class="headerlink" title="åµŒå¥—æ¡¶"></a>åµŒå¥—æ¡¶</h3><p>å¯¹èšåˆçš„ç»“æœè¿›ä¸€æ­¥èšåˆã€‚æ¯ä¸€å±‚çš„èšåˆéƒ½å¯ä»¥æ·»åŠ å•ç‹¬çš„æŒ‡æ ‡, æ¯ä¸€å±‚èšåˆçš„æŒ‡æ ‡ä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// é¦–å…ˆå¯¹æ¯ä¸€ä¸ªå›½å®¶è¿›è¡Œèšåˆ, å¹¶è®¡ç®—æ¯ä¸€ä¸ªå›½å®¶çš„å¹³å‡å¾—åˆ†</span></span><br><span class="line"><span class="comment">// å…¶æ¬¡å¯¹æ¯ä¸€ä¸ªçœä»½è¿›è¡Œèšåˆ, å¹¶è®¡ç®—æ¯ä¸€ä¸ªçœä»½çš„å¹³å‡å¾—åˆ†</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"country_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.country.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">10</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"avg_score"</span>: &#123;</span><br><span class="line">          <span class="string">"avg"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"score"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">"province_info"</span>: &#123;</span><br><span class="line">          <span class="string">"terms"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"ipInfo.province.keyword"</span>,</span><br><span class="line">            <span class="string">"size"</span>: <span class="number">100</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">"aggs"</span>: &#123;</span><br><span class="line">            <span class="string">"avg_score"</span>: &#123;</span><br><span class="line">              <span class="string">"avg"</span>: &#123;</span><br><span class="line">                <span class="string">"field"</span>: <span class="string">"score"</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç›´æ–¹å›¾"><a href="#ç›´æ–¹å›¾" class="headerlink" title="ç›´æ–¹å›¾"></a>ç›´æ–¹å›¾</h2><h3 id="ä»€ä¹ˆæ˜¯ç›´æ–¹å›¾"><a href="#ä»€ä¹ˆæ˜¯ç›´æ–¹å›¾" class="headerlink" title="ä»€ä¹ˆæ˜¯ç›´æ–¹å›¾"></a>ä»€ä¹ˆæ˜¯ç›´æ–¹å›¾</h3><p>ç›´æ–¹å›¾å°±æ˜¯æŸ±çŠ¶å›¾, åˆ›å»ºç›´æ–¹å›¾éœ€è¦æŒ‡å®šä¸€ä¸ªåŒºé—´, elasticsearchå¯ä»¥å¯¹æ¯ä¸€ä¸ªåŒºé—´è¿›è¡Œèšåˆæ“ä½œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ ¹æ®durationCallAllå­—æ®µ,  ä»æœ€å°å€¼å¼€å§‹, æ¯10000ä¸º1ä¸ªåŒºé—´è¿›è¡Œèšåˆ</span></span><br><span class="line">GET crm_statistics<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"day_duration_call_all"</span>: &#123;</span><br><span class="line">      <span class="string">"histogram"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"durationCallAll"</span>,</span><br><span class="line">        <span class="string">"interval"</span>: <span class="number">10000</span>,</span><br><span class="line">        <span class="string">"min_doc_count"</span>: <span class="number">0</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›çš„éƒ¨åˆ†ç»“æœ</span></span><br><span class="line"><span class="comment">// ......</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"key"</span>: <span class="number">20000</span>,</span><br><span class="line">  <span class="string">"doc_count"</span>: <span class="number">3</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"key"</span>: <span class="number">30000</span>,</span><br><span class="line">  <span class="string">"doc_count"</span>: <span class="number">3</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"key"</span>: <span class="number">40000</span>,</span><br><span class="line">  <span class="string">"doc_count"</span>: <span class="number">9</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ......</span></span><br></pre></td></tr></table></figure>
<h3 id="æŒ‰æ—¶é—´ç»Ÿè®¡"><a href="#æŒ‰æ—¶é—´ç»Ÿè®¡" class="headerlink" title="æŒ‰æ—¶é—´ç»Ÿè®¡"></a>æŒ‰æ—¶é—´ç»Ÿè®¡</h3><p>æ ¹æ®æ—¶é—´ç»Ÿè®¡, å¯ä»¥æ ¹æ®æ—¶é—´ç±»å‹çš„å­—æ®µè¿›è¡Œèšåˆ, åŒºé—´å¯ä»¥æ˜¯æ¯ä¸€æ—¥, æ¯ä¸€å‘¨, æ¯ä¸€æœˆ, æ¯ä¸€å­£åº¦ç­‰ç­‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET crm_statistics<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"at"</span>: &#123;</span><br><span class="line">      <span class="string">"date_histogram"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"at"</span>, <span class="comment">// æ ¹æ®æ—¶é—´ç±»å‹çš„å­—æ®µatè¿›è¡Œèšåˆ</span></span><br><span class="line">        <span class="string">"interval"</span>: <span class="string">"day"</span>, <span class="comment">// åŒºé—´æ˜¯æ¯ä¸€å¤©</span></span><br><span class="line">        <span class="string">"min_doc_count"</span>: <span class="number">0</span>, <span class="comment">// å¯ä»¥å¼ºåˆ¶è¿”å›ç©ºçš„æ¡¶</span></span><br><span class="line">        <span class="string">"extended_bounds"</span>: &#123; <span class="comment">// æ—¶é—´åŒºé—´</span></span><br><span class="line">          <span class="string">"min"</span>: <span class="string">"2018-05-30"</span>,</span><br><span class="line">          <span class="string">"max"</span>: <span class="string">"2018-06-22"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è¿”å›ç©ºçš„æ¡¶"><a href="#è¿”å›ç©ºçš„æ¡¶" class="headerlink" title="è¿”å›ç©ºçš„æ¡¶"></a>è¿”å›ç©ºçš„æ¡¶</h4><ul>
<li>min_doc_count, å¯ä»¥å¼ºåˆ¶è¿”å›é•¿åº¦ä¸ºç©ºçš„æ¡¶</li>
<li>extended_boundss, å¯ä»¥è®¾ç½®è¿”å›çš„æ—¶é—´åŒºé—´(å› ä¸ºelasticsearché»˜è®¤åªè¿”å›æœ€å°å€¼åˆ°æœ€å¤§å€¼ä¹‹é—´çš„æ¡¶)</li>
</ul>
<h3 id="æ‰©å±•ä¾‹å­"><a href="#æ‰©å±•ä¾‹å­" class="headerlink" title="æ‰©å±•ä¾‹å­"></a>æ‰©å±•ä¾‹å­</h3><p>ğŸŒ° æŒ‰æ—¶é—´ç»Ÿè®¡çš„ç›´æ–¹å›¾ä¸Šè¿›è¡Œèšåˆæ“ä½œ, å¹¶è®¡ç®—åº¦é‡æŒ‡æ ‡çš„ä¾‹å­ã€‚</p>
<p>ä¸‹é¢çš„DSL, æŒ‰æ—¶é—´è¿›è¡Œç»Ÿè®¡ç›´æ–¹å›¾, ä»¥æ¯ä¸€å¤©ä½œä¸ºåŒºé—´, å¹¶ä¸”è®¡ç®—åŒºé—´å†…, æ¯ä¸€ä¸ªçœä»½çš„å¹³å‡åˆ†æ•°, ä»¥åŠæ¯ä¸€ä¸ªçœä»½ä¸‹æ¯ä¸€ä¸ªåŸå¸‚çš„å¹³å‡å¾—åˆ†</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"at_date_histogram"</span>: &#123;</span><br><span class="line">      <span class="string">"date_histogram"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"at"</span>,</span><br><span class="line">        <span class="string">"interval"</span>: <span class="string">"day"</span>,</span><br><span class="line">        <span class="string">"min_doc_count"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="string">"extended_bounds"</span>: &#123;</span><br><span class="line">          <span class="string">"min"</span>: <span class="string">"2018-05-01"</span>,</span><br><span class="line">          <span class="string">"max"</span>: <span class="string">"2018-06-22"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"province_info"</span>: &#123;</span><br><span class="line">          <span class="string">"terms"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"ipInfo.province.keyword"</span>,</span><br><span class="line">            <span class="string">"size"</span>: <span class="number">50</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">"aggs"</span>: &#123;</span><br><span class="line">            <span class="string">"avg_score"</span>: &#123;</span><br><span class="line">              <span class="string">"avg"</span>: &#123;</span><br><span class="line">                <span class="string">"field"</span>: <span class="string">"score"</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"city_info"</span>: &#123;</span><br><span class="line">              <span class="string">"terms"</span>: &#123;</span><br><span class="line">                <span class="string">"field"</span>: <span class="string">"ipInfo.city.keyword"</span>,</span><br><span class="line">                <span class="string">"size"</span>: <span class="number">100</span></span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="string">"aggs"</span>: &#123;</span><br><span class="line">                <span class="string">"avg_score"</span>: &#123;</span><br><span class="line">                  <span class="string">"avg"</span>: &#123;</span><br><span class="line">                    <span class="string">"field"</span>: <span class="string">"score"</span></span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="é™å®šèŒƒå›´èšåˆ"><a href="#é™å®šèŒƒå›´èšåˆ" class="headerlink" title="é™å®šèŒƒå›´èšåˆ"></a>é™å®šèŒƒå›´èšåˆ</h2><p>æ²¡æœ‰æŒ‡å®šqueryçš„æƒ…å†µä¸‹, èšåˆæ“ä½œé’ˆå¯¹çš„æ˜¯æ•´ä¸ªç´¢å¼•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// é™å®šå®‰å¾½å’Œç¦å»ºä¸¤ä¸ªçœä»½è¿›è¡Œèšåˆæ“ä½œ</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>, </span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"bool"</span>: &#123;</span><br><span class="line">      <span class="string">"should"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"term"</span>: &#123;</span><br><span class="line">            <span class="string">"ipInfo.province.keyword"</span>: &#123;</span><br><span class="line">              <span class="string">"value"</span>: <span class="string">"å®‰å¾½"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"term"</span>: &#123;</span><br><span class="line">            <span class="string">"ipInfo.province.keyword"</span>: &#123;</span><br><span class="line">              <span class="string">"value"</span>: <span class="string">"ç¦å»º"</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"city_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.city.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">100</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"avg_socre"</span>: &#123;</span><br><span class="line">          <span class="string">"avg"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"score"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å…¨å±€æ¡¶"><a href="#å…¨å±€æ¡¶" class="headerlink" title="å…¨å±€æ¡¶"></a>å…¨å±€æ¡¶</h3><p>ä½¿ç”¨å…¨å±€æ¡¶(global)å¯ä»¥åœ¨æŸ¥è¯¢èŒƒå›´å†…èšåˆ, ä¹Ÿå¯ä»¥å…¨å±€æ–‡æ¡£ä¸Šèšåˆ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"bool"</span>: &#123;</span><br><span class="line">      <span class="string">"filter"</span>: &#123;</span><br><span class="line">        <span class="string">"term"</span>: &#123;</span><br><span class="line">          <span class="string">"ipInfo.province.keyword"</span>: <span class="string">"å®‰å¾½"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢é™å®šçš„èŒƒå›´å†…èšåˆ</span></span><br><span class="line">    <span class="string">"city_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.city.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">100</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"all"</span>: &#123;</span><br><span class="line">      <span class="string">"global"</span>: &#123;&#125;,</span><br><span class="line">      <span class="comment">// åœ¨å…¨å±€èŒƒå›´å†…èšåˆ</span></span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"city"</span>: &#123;</span><br><span class="line">          <span class="string">"terms"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"ipInfo.city.keyword"</span>,</span><br><span class="line">            <span class="string">"size"</span>: <span class="number">1000</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">"aggs"</span>: &#123;</span><br><span class="line">            <span class="string">"all_avg_score"</span>: &#123;</span><br><span class="line">              <span class="string">"avg"</span>: &#123;</span><br><span class="line">                <span class="string">"field"</span>: <span class="string">"score"</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¿‡æ»¤å’Œèšåˆ"><a href="#è¿‡æ»¤å’Œèšåˆ" class="headerlink" title="è¿‡æ»¤å’Œèšåˆ"></a>è¿‡æ»¤å’Œèšåˆ</h2><h3 id="è¿‡æ»¤"><a href="#è¿‡æ»¤" class="headerlink" title="è¿‡æ»¤"></a>è¿‡æ»¤</h3><p>å‚è€ƒé™å®šèŒƒå›´çš„èšåˆ ğŸš—ï¸ âœˆï¸</p>
<h3 id="è¿‡æ»¤æ¡¶"><a href="#è¿‡æ»¤æ¡¶" class="headerlink" title="è¿‡æ»¤æ¡¶"></a>è¿‡æ»¤æ¡¶</h3><p>å¯¹èšåˆçš„ç»“æœè¿›è¡Œè¿‡æ»¤</p>
<h4 id="ä¸ºä»€ä¹ˆä½¿ç”¨è¿‡æ»¤æ¡¶"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨è¿‡æ»¤æ¡¶" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨è¿‡æ»¤æ¡¶?"></a>ä¸ºä»€ä¹ˆä½¿ç”¨è¿‡æ»¤æ¡¶?</h4><p>æˆ‘ä»¬å¯èƒ½é‡åˆ°è¿™ç§æƒ…å†µ, æˆ‘ä»¬æƒ³æŠŠæŸ¥è¯¢æ¡ä»¶aæŸ¥è¯¢åˆ°æ•°æ®æ˜¾ç¤ºåˆ°å‰ç«¯é¡µé¢ä¸Š, ä½†åŒæ—¶åˆæƒ³æŠŠæŸ¥è¯¢æ¡ä»¶a+bçš„èšåˆç»“æœæ˜¾ç¤ºåˆ°é¡µé¢ä¸Šã€‚æ‰€ä»¥åœ¨è¿‡æ»¤çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿‡æ»¤æ¡ä»¶a+bã€‚è€Œèšåˆæ¡¶å°±å¯ä»¥å¯¹èšåˆçš„ç»“æœè¿›è¡Œè¿‡æ»¤</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ˜¾ç¤ºçš„ç»“æœçš„è¿‡æ»¤æ¡ä»¶æ˜¯ "å®‰å¾½"</span></span><br><span class="line"><span class="comment">// èšåˆæ˜¾ç¤ºçš„ç»“æœçš„è¿‡æ»¤æ¡ä»¶æ˜¯ "å®‰å¾½" + "èšŒåŸ "</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">20</span>,</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"bool"</span>: &#123;</span><br><span class="line">      <span class="string">"filter"</span>: &#123;</span><br><span class="line">        <span class="string">"term"</span>: &#123;</span><br><span class="line">          <span class="string">"ipInfo.province.keyword"</span>: <span class="string">"å®‰å¾½"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"city_info"</span>: &#123;</span><br><span class="line">      <span class="string">"filter"</span>: &#123;</span><br><span class="line">        <span class="string">"term"</span>: &#123;</span><br><span class="line">          <span class="string">"ipInfo.city.keyword"</span>: <span class="string">"é˜œé˜³"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, </span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"city_info"</span>: &#123;</span><br><span class="line">          <span class="string">"terms"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"ipInfo.city.keyword"</span>,</span><br><span class="line">            <span class="string">"size"</span>: <span class="number">20</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åè¿‡æ»¤å™¨"><a href="#åè¿‡æ»¤å™¨" class="headerlink" title="åè¿‡æ»¤å™¨"></a>åè¿‡æ»¤å™¨</h3><p>å¯¹æŸ¥è¯¢çš„ç»“æœè¿›è¡Œè¿‡æ»¤</p>
<h3 id="ä¸ºä»€ä¹ˆéœ€è¦åè¿‡æ»¤å™¨"><a href="#ä¸ºä»€ä¹ˆéœ€è¦åè¿‡æ»¤å™¨" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦åè¿‡æ»¤å™¨?"></a>ä¸ºä»€ä¹ˆéœ€è¦åè¿‡æ»¤å™¨?</h3><p>æˆ‘ä»¬å¯èƒ½é‡åˆ°è¿™ç§æƒ…å†µ, æˆ‘ä»¬æƒ³åœ¨æŸ¥è¯¢aæ¡ä»¶çš„æƒ…å†µä¸‹å¯¹ç»“æœä½œå‡ºèšåˆ, ä½†æ˜¯åˆæƒ³åœ¨æŸ¥è¯¢a+bæ¡ä»¶ä¸‹ä¸‹æ˜¾ç¤ºç»“æœã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨åè¿‡æ»¤å™¨, å¯¹æŸ¥è¯¢çš„ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢çš„æ¡ä»¶æ˜¯ ç¦å»º + å¦é—¨</span></span><br><span class="line"><span class="comment">// èšåˆçš„è¿‡æ»¤æ¡ä»¶æ˜¯å¦é—¨</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="string">"query"</span>: &#123;</span><br><span class="line">    <span class="string">"bool"</span>: &#123;</span><br><span class="line">      <span class="string">"filter"</span>: &#123;</span><br><span class="line">        <span class="string">"term"</span>: &#123;</span><br><span class="line">          <span class="string">"ipInfo.province.keyword"</span>: <span class="string">"ç¦å»º"</span></span><br><span class="line">        &#125; </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"post_filter"</span>: &#123;</span><br><span class="line">    <span class="string">"term"</span>: &#123;</span><br><span class="line">      <span class="string">"ipInfo.city.keyword"</span>: <span class="string">"å¦é—¨"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"city_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.city.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">20</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="èšåˆæ’åº"><a href="#èšåˆæ’åº" class="headerlink" title="èšåˆæ’åº"></a>èšåˆæ’åº</h2><h3 id="å†…ç½®æ’åº"><a href="#å†…ç½®æ’åº" class="headerlink" title="å†…ç½®æ’åº"></a>å†…ç½®æ’åº</h3><ul>
<li>_count æŒ‰ç…§æ–‡æ¡£çš„æ•°é‡æ’åº</li>
<li>_term æŒ‰è¯é¡¹çš„å­—ç¬¦ä¸²å€¼çš„å­—æ¯é¡ºåºæ’åº</li>
<li><p>_key æŒ‰æ¯ä¸ªæ¡¶çš„é”®å€¼æ•°å€¼æ’åºã€‚åªåœ¨histogramå’Œdate_histogramå†…ä½¿ç”¨</p>
</li>
<li><p>desc é™åº</p>
</li>
<li>asc å‡åº</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ–‡æ¡£çš„å†…å®¹å‡åºè¿›è¡Œæ’åº</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>, </span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"province"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.province.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">50</span>,</span><br><span class="line">        <span class="string">"order"</span>: &#123;</span><br><span class="line">          <span class="string">"_count"</span>: <span class="string">"asc"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰ç…§å­—ç¬¦ä¸²çš„é¡ºåºè¿›è¡Œæ’åº, åªèƒ½ç”¨åœ¨term</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"game_id_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"gameId.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">50</span>,</span><br><span class="line">        <span class="string">"order"</span>: &#123;</span><br><span class="line">          <span class="string">"_term"</span>: <span class="string">"asc"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æŒ‰ç…§date_histogramæˆ–è€…histogramçš„keyæ’åº</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"date"</span>: &#123;</span><br><span class="line">      <span class="string">"date_histogram"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"at"</span>,</span><br><span class="line">        <span class="string">"interval"</span>: <span class="string">"day"</span>,</span><br><span class="line">        <span class="string">"min_doc_count"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="comment">// æ—¶é—´åŒºé—´æŒ‰ç…§é™åºæ’åº</span></span><br><span class="line">        <span class="string">"order"</span>: &#123;</span><br><span class="line">          <span class="string">"_key"</span>: <span class="string">"desc"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="åº¦é‡æ’åº"><a href="#åº¦é‡æ’åº" class="headerlink" title="åº¦é‡æ’åº"></a>åº¦é‡æ’åº</h3><p>ç›´æ¥ä½¿ç”¨åº¦é‡çš„keyä½œä¸ºæ’åºçš„å­—æ®µ</p>
<h4 id="å•åº¦é‡å€¼æ’åº"><a href="#å•åº¦é‡å€¼æ’åº" class="headerlink" title="å•åº¦é‡å€¼æ’åº"></a>å•åº¦é‡å€¼æ’åº</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"province_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.province.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">50</span>,</span><br><span class="line">        <span class="string">"order"</span>: &#123;</span><br><span class="line">          <span class="string">"avg_score"</span>: <span class="string">"asc"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"avg_score"</span>: &#123;</span><br><span class="line">          <span class="string">"avg"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"score"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å¤šåº¦é‡å€¼æ’åº"><a href="#å¤šåº¦é‡å€¼æ’åº" class="headerlink" title="å¤šåº¦é‡å€¼æ’åº"></a>å¤šåº¦é‡å€¼æ’åº</h4><p>ä½¿ç”¨ç‚¹æ“ä½œç¬¦å·, é€‰æ‹©å•ä¸ªåº¦é‡å€¼è¿›è¡Œæ’åº</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"province_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.province.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">50</span>,</span><br><span class="line">        <span class="string">"order"</span>: &#123;</span><br><span class="line">          <span class="string">"info.avg"</span>: <span class="string">"asc"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"info"</span>: &#123;</span><br><span class="line">          <span class="string">"extended_stats"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"score"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¿‘ä¼¼èšåˆ"><a href="#è¿‘ä¼¼èšåˆ" class="headerlink" title="è¿‘ä¼¼èšåˆ"></a>è¿‘ä¼¼èšåˆ</h2><p>å¯¹äºä¸€äº›å¤æ‚çš„æ“ä½œï¼Œéœ€è¦åœ¨ç²¾å‡†æ€§å’Œå®æ—¶æ€§ä¸Šä½œå‡ºæƒè¡¡</p>
<h3 id="è¿‘ä¼¼èšåˆ-â€”â€”-å»é‡"><a href="#è¿‘ä¼¼èšåˆ-â€”â€”-å»é‡" class="headerlink" title="è¿‘ä¼¼èšåˆ â€”â€” å»é‡"></a>è¿‘ä¼¼èšåˆ â€”â€” å»é‡</h3><p>cardinalityå¯ä»¥å®ç°å»é‡æ“ä½œ, ä½†æ˜¯æ•°æ®é‡å·¨å¤§çš„æƒ…å†µä¸‹ç²¾ç¡®æ€§ä¸Šå¯èƒ½å­˜åœ¨è¯¯å·®, ä½†æ˜¯å¯ä»¥è®¾ç½®æ›´å¤§çš„å†…å­˜æä¾›å»é‡çš„ç²¾ç¡®æ€§</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹æœ‰å¤šå°‘ä¸ªåŸå¸‚</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"city_count"</span>: &#123;</span><br><span class="line">      <span class="string">"cardinality"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.city.keyword"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»Ÿè®¡æ¯ä¸€ä¸ªçœä»½çš„åŸå¸‚æ•°é‡</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"country_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.country.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">10</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"province_info"</span>: &#123;</span><br><span class="line">          <span class="string">"terms"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"ipInfo.province.keyword"</span>,</span><br><span class="line">            <span class="string">"size"</span>: <span class="number">50</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">"aggs"</span>: &#123;</span><br><span class="line">            <span class="string">"city"</span>: &#123;</span><br><span class="line">              <span class="string">"terms"</span>: &#123;</span><br><span class="line">                <span class="string">"field"</span>: <span class="string">"ipInfo.city.keyword"</span>,</span><br><span class="line">                <span class="string">"size"</span>: <span class="number">50</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="string">"city_count"</span>: &#123;</span><br><span class="line">              <span class="string">"cardinality"</span>: &#123;</span><br><span class="line">                <span class="string">"field"</span>: <span class="string">"ipInfo.city.keyword"</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="precision-threshold"><a href="#precision-threshold" class="headerlink" title="precision_threshold"></a>precision_threshold</h4><p>cardinalityç²¾ç¡®æ€§ä¸å†…å­˜çš„ä½¿ç”¨é‡æœ‰å…³ï¼Œé€šè¿‡é…ç½®precision_thresholdå‚æ•°ï¼Œè®¾ç½®å»é‡éœ€è¦çš„å›ºå®šå†…å­˜ä½¿ç”¨é‡ã€‚å†…å­˜ä½¿ç”¨é‡åªä¸ä½ é…ç½®çš„ç²¾ç¡®åº¦ç›¸å…³ã€‚</p>
<p>precision_threshold è®¾ç½®ä¸º100çš„æ—¶å€™ï¼Œå»é‡çš„éœ€è¦çš„å†…å­˜æ˜¯ 100 * 8 çš„å­—èŠ‚ã€‚precision_threshold æ¥å—çš„èŒƒå›´åœ¨0â€“40,000ä¹‹é—´</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ç»Ÿè®¡æ¯ä¸€ä¸ªå›½å®¶çš„æ•°é‡</span></span><br><span class="line">GET swmgame-activity<span class="number">-2018.06</span>/my_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"country_count"</span>: &#123;</span><br><span class="line">      <span class="string">"cardinality"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"ipInfo.country.keyword"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è¿‘ä¼¼èšåˆ-â€”â€”-ç™¾åˆ†ä½"><a href="#è¿‘ä¼¼èšåˆ-â€”â€”-ç™¾åˆ†ä½" class="headerlink" title="è¿‘ä¼¼èšåˆ â€”â€” ç™¾åˆ†ä½"></a>è¿‘ä¼¼èšåˆ â€”â€” ç™¾åˆ†ä½</h3><h4 id="ä»€ä¹ˆæ˜¯ç™¾åˆ†ä½"><a href="#ä»€ä¹ˆæ˜¯ç™¾åˆ†ä½" class="headerlink" title="ä»€ä¹ˆæ˜¯ç™¾åˆ†ä½"></a>ä»€ä¹ˆæ˜¯ç™¾åˆ†ä½</h4><p>ä»¥ä¸‹æ˜¯<a href="https://baike.baidu.com/item/%E7%99%BE%E5%88%86%E4%BD%8D%E6%95%B0/10064171?fr=aladdin" target="_blank" rel="noopener">ç™¾åº¦ç™¾ç§‘</a>çš„å†…å®¹</p>
<p>ç»Ÿè®¡å­¦æœ¯è¯­ï¼Œ<strong>å¦‚æœå°†ä¸€ç»„æ•°æ®ä»å°åˆ°å¤§æ’åº</strong>ï¼Œå¹¶è®¡ç®—ç›¸åº”çš„ç´¯è®¡ç™¾åˆ†ä½ï¼Œåˆ™æŸä¸€ç™¾åˆ†ä½æ‰€å¯¹åº”æ•°æ®çš„å€¼å°±ç§°ä¸ºè¿™ä¸€ç™¾åˆ†ä½çš„ç™¾åˆ†ä½æ•°ã€‚å¯è¡¨ç¤ºä¸ºï¼šä¸€ç»„nä¸ªè§‚æµ‹å€¼æŒ‰æ•°å€¼å¤§å°æ’åˆ—ã€‚å¦‚ï¼Œå¤„äºp%ä½ç½®çš„å€¼ç§°ç¬¬pç™¾åˆ†ä½æ•°ã€‚</p>
<p>ç™¾åˆ†ä½é€šå¸¸ç”¨ç¬¬å‡ ç™¾åˆ†ä½æ¥è¡¨ç¤ºï¼Œå¦‚ç¬¬äº”ç™¾åˆ†ä½ï¼Œå®ƒè¡¨ç¤ºåœ¨æ‰€æœ‰æµ‹é‡æ•°æ®ä¸­ï¼Œæµ‹é‡å€¼çš„ç´¯è®¡é¢‘æ¬¡è¾¾5%ã€‚ä»¥èº«é«˜ä¸ºä¾‹ï¼Œèº«é«˜åˆ†å¸ƒçš„ç¬¬äº”ç™¾åˆ†ä½è¡¨ç¤ºæœ‰5%çš„äººçš„èº«é«˜å°äºæ­¤æµ‹é‡å€¼ï¼Œ95%çš„èº«é«˜å¤§äºæ­¤æµ‹é‡å€¼ã€‚</p>
<p>é«˜ç­‰é™¢æ ¡çš„å…¥å­¦è€ƒè¯•æˆç»©ç»å¸¸ä»¥ç™¾åˆ†ä½æ•°çš„å½¢å¼æŠ¥å‘Šã€‚æ¯”å¦‚ï¼Œå‡è®¾æŸä¸ªè€ƒç”Ÿåœ¨å…¥å­¦è€ƒè¯•ä¸­çš„è¯­æ–‡éƒ¨åˆ†çš„åŸå§‹åˆ†æ•°ä¸º54åˆ†ã€‚ç›¸å¯¹äºå‚åŠ åŒä¸€è€ƒè¯•çš„å…¶ä»–å­¦ç”Ÿæ¥è¯´ï¼Œä»–çš„æˆç»©å¦‚ä½•å¹¶ä¸å®¹æ˜“çŸ¥é“ã€‚ä½†æ˜¯å¦‚æœåŸå§‹åˆ†æ•°54åˆ†æ°å¥½å¯¹åº”çš„æ˜¯ç¬¬70ç™¾åˆ†ä½æ•°ï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥é“å¤§çº¦70%çš„å­¦ç”Ÿçš„è€ƒåˆ†æ¯”ä»–ä½ï¼Œè€Œçº¦30%çš„å­¦ç”Ÿè€ƒåˆ†æ¯”ä»–é«˜ã€‚</p>
<h4 id="ç™¾åˆ†ä½è®¡ç®—"><a href="#ç™¾åˆ†ä½è®¡ç®—" class="headerlink" title="ç™¾åˆ†ä½è®¡ç®—"></a>ç™¾åˆ†ä½è®¡ç®—</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ æµ‹è¯•æ•°æ®, ç½‘ç»œå»¶è¿Ÿæ•°æ®</span></span><br><span class="line">PUT test9_index</span><br><span class="line">POST /test9_index/doc/_bulk</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">100</span>, <span class="string">"zone"</span> : <span class="string">"US"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-28"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">80</span>, <span class="string">"zone"</span> : <span class="string">"US"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-29"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">99</span>, <span class="string">"zone"</span> : <span class="string">"US"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-29"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">102</span>, <span class="string">"zone"</span> : <span class="string">"US"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-28"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">75</span>, <span class="string">"zone"</span> : <span class="string">"US"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-28"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">82</span>, <span class="string">"zone"</span> : <span class="string">"US"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-29"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">100</span>, <span class="string">"zone"</span> : <span class="string">"EU"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-28"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">280</span>, <span class="string">"zone"</span> : <span class="string">"EU"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-29"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">155</span>, <span class="string">"zone"</span> : <span class="string">"EU"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-29"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">623</span>, <span class="string">"zone"</span> : <span class="string">"EU"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-28"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">380</span>, <span class="string">"zone"</span> : <span class="string">"EU"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-28"</span> &#125;</span><br><span class="line">&#123; <span class="string">"index"</span>: &#123;&#125;&#125;</span><br><span class="line">&#123; <span class="string">"latency"</span> : <span class="number">319</span>, <span class="string">"zone"</span> : <span class="string">"EU"</span>, <span class="string">"timestamp"</span> : <span class="string">"2014-10-29"</span> &#125;</span><br></pre></td></tr></table></figure>
<p>è®¡ç®—ç½‘ç»œå»¶è¿Ÿçš„ç™¾åˆ†ä½å’Œç½‘ç»œå»¶è¿Ÿçš„å¹³å‡æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET test9_index/doc/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="comment">// è®¡ç®—ç½‘ç»œå»¶è¿Ÿçš„å¹³å‡æ•°</span></span><br><span class="line">    <span class="string">"avg_ping"</span>: &#123;</span><br><span class="line">      <span class="string">"avg"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"latency"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// è®¡ç®—ç½‘ç»œå»¶è¿Ÿçš„ç™¾åˆ†ä½</span></span><br><span class="line">    <span class="string">"percentiles_ping"</span>: &#123;</span><br><span class="line">      <span class="string">"percentiles"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"latency"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯è¿”å›çš„èšåˆç»“æœï¼Œå¯ä»¥çœ‹åˆ°å¹³å‡æ•°æœ‰æ—¶å¹¶ä¸èƒ½ä½“ç°å¼‚å¸¸çš„æ•°æ®ã€‚çº¦æœ‰25%çš„ç”¨æˆ·çš„ç½‘ç»œå»¶è¿Ÿæ˜¯å¤§äº289çš„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"aggregations"</span>: &#123;</span><br><span class="line">  <span class="string">"avg_ping"</span>: &#123;</span><br><span class="line">    <span class="string">"value"</span>: <span class="number">199.58333333333334</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"percentiles_ping"</span>: &#123;</span><br><span class="line">    <span class="string">"values"</span>: &#123;</span><br><span class="line">      <span class="string">"1.0"</span>: <span class="number">75.55</span>,</span><br><span class="line">      <span class="string">"5.0"</span>: <span class="number">77.75</span>,</span><br><span class="line">      <span class="string">"25.0"</span>: <span class="number">94.75</span>,</span><br><span class="line">      <span class="string">"50.0"</span>: <span class="number">101</span>,</span><br><span class="line">      <span class="string">"75.0"</span>: <span class="number">289.75</span>,</span><br><span class="line">      <span class="string">"95.0"</span>: <span class="number">489.34999999999985</span>,</span><br><span class="line">      <span class="string">"99.0"</span>: <span class="number">596.2700000000002</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ç½‘ç»œçš„å»¶è¿Ÿæ˜¯å¦å’Œåœ°åŒºæœ‰å…³ï¼Œåœ¨èšåˆçš„åŸºç¡€ä¸Šè¿›è¡Œç™¾åˆ†ä½è®¡ç®—ã€‚æ ¹æ®ç»“æœå¯ä»¥å¾—çŸ¥, æ¬§æ´²ç”¨æˆ·(EU)çš„ç½‘ç»œå»¶è¿Ÿæ›´é«˜</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET test9_index/doc/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"zone_info"</span>: &#123;</span><br><span class="line">      <span class="string">"terms"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"zone.keyword"</span>,</span><br><span class="line">        <span class="string">"size"</span>: <span class="number">10</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"aggs"</span>: &#123;</span><br><span class="line">        <span class="string">"zone_ping"</span>: &#123;</span><br><span class="line">          <span class="string">"percentiles"</span>: &#123;</span><br><span class="line">            <span class="string">"field"</span>: <span class="string">"latency"</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ç™¾åˆ†ä½ç­‰çº§"><a href="#ç™¾åˆ†ä½ç­‰çº§" class="headerlink" title="ç™¾åˆ†ä½ç­‰çº§"></a>ç™¾åˆ†ä½ç­‰çº§</h4><p>å¾—çŸ¥å…·ä½“çš„æ•°å€¼æ‰€å çš„ç™¾åˆ†ä½ã€‚ä»¥ä¸‹æ˜¯æŸ¥çœ‹pingä¸º75, 623çš„ç”¨æˆ·æ‰€å çš„ç™¾åˆ†ä½ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">GET test9_index/doc/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"size"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"aggs"</span>: &#123;</span><br><span class="line">    <span class="string">"ping"</span>: &#123;</span><br><span class="line">      <span class="string">"percentile_ranks"</span>: &#123;</span><br><span class="line">        <span class="string">"field"</span>: <span class="string">"latency"</span>,</span><br><span class="line">        <span class="string">"values"</span>: [</span><br><span class="line">          <span class="number">75</span>,</span><br><span class="line">          <span class="number">623</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„ç»“æœ, pingå°äºç­‰äº75çš„ç”¨æˆ·å åˆ°äº†4.16%, æœ‰22.5%çš„ç”¨æˆ·pingæ˜¯å¤§äº623çš„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">"aggregations"</span>: &#123;</span><br><span class="line">  <span class="string">"ping"</span>: &#123;</span><br><span class="line">    <span class="string">"values"</span>: &#123;</span><br><span class="line">      <span class="string">"75.0"</span>: <span class="number">4.166666666666666</span>,</span><br><span class="line">      <span class="string">"623.0"</span>: <span class="number">87.5</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Elasticsearchä¼šæš‚åœæ›´æ–°, æœªæ¥æœ‰æ—¶é—´äº†è¿˜ä¼šç»§ç»­æ›´æ–°, ç›®å‰ä¸ºæ­¢æˆ‘ä¸ªäººå·¥ä½œæ‰€éœ€çš„çŸ¥è¯†å·²ç»è¶³å¤Ÿäº†â€¦.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Elasticsearch/" rel="tag"># Elasticsearch</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/19/Elasticsearch02/" rel="next" title="Elasticsearchå…¥é—¨ (2)">
                <i class="fa fa-chevron-left"></i> Elasticsearchå…¥é—¨ (2)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/28/shell01/" rel="prev" title="ç®€å•çš„shell">
                ç®€å•çš„shell <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpeg"
                alt="å¼ è¶Š" />
            
              <p class="site-author-name" itemprop="name">å¼ è¶Š</p>
              <p class="site-description motion-element" itemprop="description">æ‰€è°“æˆé•¿ï¼Œå°±æ˜¯ç»è¿‡ä¸æ–­çš„èšæ•£ç¦»åˆï¼Œæ‰¾åˆ°ä¸å¤ªä¼šä¼¤å®³åˆ°å½¼æ­¤çš„è·ç¦»</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">59</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/BengBu-YueZhang" target="_blank" title="æˆ‘çš„GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>æˆ‘çš„GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/5460100952/profile?topnav=1&wvr=6" target="_blank" title="æˆ‘çš„å¾®åš">
                      
                        <i class="fa fa-fw fa-globe"></i>æˆ‘çš„å¾®åš</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#èšåˆ"><span class="nav-number">1.</span> <span class="nav-text">èšåˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#åŸºæœ¬æ¦‚å¿µ"><span class="nav-number">1.1.</span> <span class="nav-text">åŸºæœ¬æ¦‚å¿µ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¡¶"><span class="nav-number">1.1.1.</span> <span class="nav-text">æ¡¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æŒ‡æ ‡"><span class="nav-number">1.1.2.</span> <span class="nav-text">æŒ‡æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æŒ‡æ ‡ä¸æ¡¶"><span class="nav-number">1.1.3.</span> <span class="nav-text">æŒ‡æ ‡ä¸æ¡¶</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆæ­¥èšåˆ"><span class="nav-number">1.2.</span> <span class="nav-text">åˆæ­¥èšåˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ç®€å•çš„èšåˆ"><span class="nav-number">1.2.1.</span> <span class="nav-text">ç®€å•çš„èšåˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç®€å•çš„æŒ‡æ ‡"><span class="nav-number">1.2.2.</span> <span class="nav-text">ç®€å•çš„æŒ‡æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åµŒå¥—æ¡¶"><span class="nav-number">1.2.3.</span> <span class="nav-text">åµŒå¥—æ¡¶</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç›´æ–¹å›¾"><span class="nav-number">1.3.</span> <span class="nav-text">ç›´æ–¹å›¾</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯ç›´æ–¹å›¾"><span class="nav-number">1.3.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯ç›´æ–¹å›¾</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æŒ‰æ—¶é—´ç»Ÿè®¡"><span class="nav-number">1.3.2.</span> <span class="nav-text">æŒ‰æ—¶é—´ç»Ÿè®¡</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#è¿”å›ç©ºçš„æ¡¶"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">è¿”å›ç©ºçš„æ¡¶</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ‰©å±•ä¾‹å­"><span class="nav-number">1.3.3.</span> <span class="nav-text">æ‰©å±•ä¾‹å­</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é™å®šèŒƒå›´èšåˆ"><span class="nav-number">1.4.</span> <span class="nav-text">é™å®šèŒƒå›´èšåˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å…¨å±€æ¡¶"><span class="nav-number">1.4.1.</span> <span class="nav-text">å…¨å±€æ¡¶</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è¿‡æ»¤å’Œèšåˆ"><span class="nav-number">1.5.</span> <span class="nav-text">è¿‡æ»¤å’Œèšåˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#è¿‡æ»¤"><span class="nav-number">1.5.1.</span> <span class="nav-text">è¿‡æ»¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è¿‡æ»¤æ¡¶"><span class="nav-number">1.5.2.</span> <span class="nav-text">è¿‡æ»¤æ¡¶</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸ºä»€ä¹ˆä½¿ç”¨è¿‡æ»¤æ¡¶"><span class="nav-number">1.5.2.1.</span> <span class="nav-text">ä¸ºä»€ä¹ˆä½¿ç”¨è¿‡æ»¤æ¡¶?</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åè¿‡æ»¤å™¨"><span class="nav-number">1.5.3.</span> <span class="nav-text">åè¿‡æ»¤å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¸ºä»€ä¹ˆéœ€è¦åè¿‡æ»¤å™¨"><span class="nav-number">1.5.4.</span> <span class="nav-text">ä¸ºä»€ä¹ˆéœ€è¦åè¿‡æ»¤å™¨?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#èšåˆæ’åº"><span class="nav-number">1.6.</span> <span class="nav-text">èšåˆæ’åº</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å†…ç½®æ’åº"><span class="nav-number">1.6.1.</span> <span class="nav-text">å†…ç½®æ’åº</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#åº¦é‡æ’åº"><span class="nav-number">1.6.2.</span> <span class="nav-text">åº¦é‡æ’åº</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#å•åº¦é‡å€¼æ’åº"><span class="nav-number">1.6.2.1.</span> <span class="nav-text">å•åº¦é‡å€¼æ’åº</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¤šåº¦é‡å€¼æ’åº"><span class="nav-number">1.6.2.2.</span> <span class="nav-text">å¤šåº¦é‡å€¼æ’åº</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è¿‘ä¼¼èšåˆ"><span class="nav-number">1.7.</span> <span class="nav-text">è¿‘ä¼¼èšåˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#è¿‘ä¼¼èšåˆ-â€”â€”-å»é‡"><span class="nav-number">1.7.1.</span> <span class="nav-text">è¿‘ä¼¼èšåˆ â€”â€” å»é‡</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#precision-threshold"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">precision_threshold</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è¿‘ä¼¼èšåˆ-â€”â€”-ç™¾åˆ†ä½"><span class="nav-number">1.7.2.</span> <span class="nav-text">è¿‘ä¼¼èšåˆ â€”â€” ç™¾åˆ†ä½</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯ç™¾åˆ†ä½"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯ç™¾åˆ†ä½</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç™¾åˆ†ä½è®¡ç®—"><span class="nav-number">1.7.2.2.</span> <span class="nav-text">ç™¾åˆ†ä½è®¡ç®—</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ç™¾åˆ†ä½ç­‰çº§"><span class="nav-number">1.7.2.3.</span> <span class="nav-text">ç™¾åˆ†ä½ç­‰çº§</span></a></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">å¼ è¶Š</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
